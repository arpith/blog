---
layout: post
date: 2015-12-17 23:59:25 GMT
tags:
- react native
- ios
- app
- ios app development
- constellational
- notes
- javascript
- universal links
- sharing
- reading
- writing
- deep links
title: "Universal Links in React Native"
---
# Universal Links in React Native

<p>I’m <a href="http://github.com/constellational">building</a> an <a href="http://github.com/constellational/iOS">app</a> to <a href="http://arpith.co/post/134539082857/sharing-a-post">share notes</a> called <a href="http://constellational.com/">Constellational</a>, and one thing <a href="https://github.com/constellational/iOS/issues/28">I’ve wanted</a> is support for <a href="https://developer.apple.com/library/ios/documentation/General/Conceptual/AppSearch/UniversalLinks.html">universal links</a> — this lets you use <a href="http://arpith.co/post/134800526522/deep-links-in-react-native">regular links</a> for sharing that will be <a href="http://arpith.co/post/135064653482/from-website-to-app">opened in your app</a> instead of your <a href="http://arpith.co/post/134265953082/server-side-react-ejs">website</a>.</p><figure class="tmblr-full" data-orig-height="600" data-orig-width="800"><img src="/images/fd72943f43c3c64456a1f649b388d0aa8f9fbd8911d773e9b05cca8b692d39af.jpg" data-orig-height="600" data-orig-width="800"></figure><p>&nbsp; <a href="https://facebook.github.io/react-native/">React Native</a>’s latest release (<a href="https://github.com/facebook/react-native/releases/tag/v0.17.0-rc">0.7-rc</a>) <a href="https://github.com/facebook/react-native/commit/f4c286f7ac0665edc3027e952d3b445703918c9c">supports this</a>! Here’s how you you do it:</p><pre>$ npm install react-native@latest --save</pre><p><a href="http://arpith.co/post/133201714402/using-a-link-to-sign-in-to-your-app">As I explained earlier</a>, you need to add an entitlement to your XCode project, and <a href="http://arpith.co/post/133275553207/your-babys-first-word-will-be-json">upload a JSON file to your website</a>. You also <a href="https://facebook.github.io/react-native/docs/linkingios.html">need to add this</a> to your app’s <a href="https://github.com/constellational/iOS/blob/b63096b59267e7ff1070a42866e7e73b6f5aa9e4/iOS/AppDelegate.m">AppDelegate.m</a>:</p><pre>- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {<br> &nbsp;return [RCTLinkingManager application:application openURL:url sourceApplication:sourceApplication annotation:annotation];<br>}</pre><pre>— (BOOL)application:(UIApplication *)application continueUserActivity:(NSUserActivity *)userActivity restorationHandler:(void (^)(NSArray * _Nullable))restorationHandler {<br> &nbsp;return [RCTLinkingManager application:application continueUserActivity:userActivity restorationHandler:restorationHandler];<br>}</pre><p>And finally, <a href="http://arpith.co/post/134800526522/deep-links-in-react-native">listen to the events on LinkingIOS</a> in your React component. My app’s handleOpenURL function <a href="https://github.com/constellational/iOS/blob/6b701edb1465332b955a8295cb80c7b440769f2d/components/NavPage.js">looks like</a>:</p><pre>handleOpenURL(event) {<br> &nbsp;var urlPath = event.url.split('constellational.com/')[1];<br> &nbsp;var splitPath = urlPath.split('/');<br> &nbsp;var username = splitPath.shift();<br> &nbsp;var postID = splitPath.shift(); <br> &nbsp;this.props.navigator.immediatelyResetRouteStack([<br> &nbsp; &nbsp;{id: 'navigation'},<br> &nbsp; &nbsp;{id: 'posts', username: username, postID: postID, url: urlPath}<br> &nbsp;]);<br>}</pre><p>I’m using <a href="http://arpith.co/post/134471382857/more-navigation-in-react-native">immediatelyResetRouteStack()</a> instead of just <a href="https://facebook.github.io/react-native/docs/navigator.html">navigator.push()</a>&nbsp;because it fixes a <a href="https://github.com/constellational/iOS/issues/64">weird bug</a> I had where my <a href="http://arpith.co/post/134595293672/reading-everyone-you-love">PostsPage</a> loaded twice.</p><p>Note that this <a href="http://arpith.co/post/133201714402/using-a-link-to-sign-in-to-your-app">finally</a> fixes <a href="https://github.com/constellational/iOS/issues/28">#28</a></p>